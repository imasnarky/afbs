(this["webpackJsonppdf-bullets-cra"]=this["webpackJsonppdf-bullets-cra"]||[]).push([[0],{285:function(e,t){},287:function(e,t){},446:function(e,t){},447:function(e,t){},448:function(e,t){},449:function(e,t){},450:function(e,t){},455:function(e,t){},456:function(e,t){},489:function(e,t,n){},490:function(e,t,n){"use strict";n.r(t);var a=n(10),r=n(20),i=n(132),o=n.n(i),s=n(59),c=n(108),l=n(96),u=n(53),h=(n(431),0),d=1,b=-1,f=-4,p={all:{AF707:{fields:["S2DutyTitleDesc","S4Assessment","S5Assessment","S6Assessment"],likelyWidth:"201.041mm"},AF1206:{fields:["specificAccomplishments","p2SpecificAccomplishments"],likelyWidth:"202.321mm"},AF910:{fields:["KeyDuties","IIIComments","IVComments","VComments","VIIIComments","IXComments"],likelyWidth:"202.321mm"},AF911:{fields:["KeyDuties","IIIComments","IVComments","VIIComments","VIIIComments","IXComments"],likelyWidth:"202.321mm"}}},j=function(e){return e.split(/[\s]+/)},m=function e(t,n,a){t.match("\n")&&console.error("renderBulletText expects a single line of text");var r=n(t.trimEnd());if(""===t)return{textLines:[],fullWidth:0,lines:0,overflow:0-a};if(r<a)return{textLines:[t],fullWidth:r,lines:1,overflow:r-a};var i=t.split(/(?<=[\u2004\u2009\u2006\s?/|\-%!])(?=[a-zA-Z0-9+\\])/);if(n(i[0].trimEnd())<a){for(var o=0,s=1;s<=i.length;s++){if(n(i.slice(0,s).join("").trimEnd())>a){o=s-1;break}}var c=i.slice(o,i.length).join("");if(c===t)return console.warn("Can't fit \""+t+'" on a single line\n',{text:t,width:a,fullWidth:r}),{textLines:[t],fullWidth:r,lines:1,overflow:r-a};var u=e(c,n,a);return{textLines:[i.slice(0,o).join("")].concat(Object(l.a)(u.textLines)),fullWidth:r,lines:1+u.lines,overflow:r-a}}var h=r/t.length,d=parseInt(a/h),b=n(t.substring(0,d)),f=d;if(b>a)for(var p=d-1;p>0;p--){if(n(t.substring(0,p))<a){f=p;break}}else if(b<a)for(var j=d;j<=t.length;j++){if(n(t.substring(0,j))>a){f=j-1;break}}var m=t.substring(f,t.length);if(m===t)return console.warn("Can't fit \""+t+'" on a single line\n',{text:t,width:a,fullWidth:r}),{textLines:[t],fullWidth:r,lines:1,overflow:r-a};var g=e(m,n,a);return{textLines:[t.substring(0,f)].concat(Object(l.a)(g.textLines)),fullWidth:r,lines:1+g.lines,overflow:r-a}};var g=function(e){var t=e.text,n=void 0===t?"":t,i=e.widthPx,o=void 0===i?500:i,c=e.enableOptim,l=void 0!==c&&c,u=e.height,p=e.onHighlight,g=Object(r.useRef)(null),v=Object(r.useState)((function(){return[" "]})),O=Object(s.a)(v,2),x=O[0],y=O[1],w=Object(r.useState)("inherit"),S=Object(s.a)(w,2),C=S[0],N=S[1],k=Object(r.useState)(!1),E=Object(s.a)(k,2),T=E[0],D=E[1],R=Object(r.useState)(b),A=Object(s.a)(R,2),W=A[0],I=A[1],H=Object(r.useState)({textLines:[""]}),P=Object(s.a)(H,2),F=P[0],M=P[1],L=o+.55;function J(e,t){var n=t.getContext("2d");return n.font="12pt Times New Roman",n.textAlign="left",n.measureText(e).width}return Object(r.useEffect)((function(){M(m(n,(function(e){return J(e,g.current)}),L))}),[n,L,l]),Object(r.useEffect)((function(){if(D(!0),y(F.textLines),l){var e=function(e,t){var n="\u2004",a=j(e.trimEnd()),r=t(e);if(0===r.overflow)return{status:h,rendering:r};var i,o,s=r,c=r,l=r.overflow>=0?"\u2006":n,u=b,p=t(a[0]+" "+a.slice(1).join(l));if("\u2006"===l&&p.overflow>0||l===n&&p.overflow<f)return{status:d,rendering:p};for(;;){var m=(i=a.join(""),o=a.length-1-1,Math.floor(Math.abs(Math.floor(9*function(e){var t,n=0;if(0===e.length)return n;for(t=0;t<e.length;t++)n=(n<<5)-n+e.charCodeAt(t),n|=0;return n}(i)+5)%1e5/1e5)*Math.floor(o))+1);a.splice(m,2,a.slice(m,m+2).join(l));var g=t(a.join(" "));if(l===n&&g.overflow>0){c=s,u=h;break}if("\u2006"===l&&g.overflow<=0){c=g,u=h;break}if(2===a.length){c=g,u=l===n&&c.overflow>f?h:d;break}s=g}return{status:u,rendering:c}}(n,(function(e){return m(e,(function(e){return J(e,g.current)}),L)}));D(!1),I(e.status),y(e.rendering.textLines)}else F.overflow<f||F.overflow>0?I(d):I(h),y(F.textLines),D(!1)}),[F,l,n,L]),Object(r.useEffect)((function(){N(T?"silver":W===d?"red":"black")}),[T,x,W]),Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("canvas",{ref:g,style:{visibility:"hidden",position:"absolute",top:"-1000px",left:"-1000px"}}),Object(a.jsx)("div",{style:{minHeight:u,color:C,display:"flex",flexDirection:"column"},onMouseUp:p,children:x.map((function(e){return Object(a.jsx)("span",{style:{whiteSpace:"pre"},children:e},e)}))})]})};function v(e){var t=e.editorState,n=e.setEditorState,i=e.width,o=e.onSelect,h=e.abbrReplacer,d=e.enableOptim,b=e.enableHighlight,f=e.onHighlightChange,p="bulletOutput",j=Object(r.useState)(new Map),m=Object(s.a)(j,2),v=m[0],x=m[1];return Object(r.useEffect)((function(){var e,n=new Map,a=Object(c.a)(t.getCurrentContent().getBlockMap().keys());try{for(a.s();!(e=a.n()).done;){var r=e.value,i=document.querySelector('div[data-offset-key="'.concat(r,'-0-0"]'));i&&n.set(r,i.getBoundingClientRect().height)}}catch(o){a.e(o)}finally{a.f()}x(n)}),[t]),Object(a.jsxs)("div",{className:"bullets columns is-multiline",children:[Object(a.jsxs)("div",{className:"column",style:{},children:[Object(a.jsx)("h2",{className:"subtitle",children:"Input Bullets Here:"}),Object(a.jsx)("div",{className:"border",style:{width:i+1+"mm"},children:Object(a.jsx)(u.Editor,{editorState:t,onChange:function(e){if(t.getCurrentContent()!==e.getCurrentContent()){var r=e.getCurrentContent();if(!0===b){var i=function(e){var t=document.getElementsByClassName("yellow-highlight");console.log(t),console.log(e.target);var n,a=Object(c.a)(t);try{for(a.s();!(n=a.n()).done;){var r=n.value;e.target.innerText==r.outerText&&("yellow"==r.style.background?r.style.background="LawnGreen":r.style.background="yellow")}}catch(i){a.e(i)}finally{a.f()}},s=function(e,t){!function(e,t,n){var a=t.getText();e.forEach((function(e){Object(l.a)(a.matchAll(e)).forEach((function(e){return n(e.index,e.index+e[0].length)}))}))}(h,e,t)},h=function(e){return e.filter((function(t,n){return e.indexOf(t)!==n&&t.length>1}))}(r.getPlainText().split(/\s|;|--|\//));h=Object(l.a)(new Set(h));var d=function(e){var t=e.children;return Object(a.jsx)("span",{className:"yellow-highlight",onClick:i,style:{background:"yellow",cursor:"pointer"},children:t})},f=O(e).selectedText;o&&""!==f&&o(f),n(u.EditorState.set(e,{decorator:new u.CompositeDecorator([{strategy:s,component:d}])}))}else{var p=O(e).selectedText;o&&""!==p&&o(p),n(u.EditorState.set(e,{decorator:null}))}}else{n(e);var j=O(e).selectedText;o&&""!==j&&o(j)}},handleKeyCommand:function(e,t){var a=u.RichUtils.handleKeyCommand(t,e);return a?(n(a),"handled"):"not-handled"},stripPastedStyles:!0,spellCheck:!0,autoCorrect:"off",enableHighlight:b,onHighlightChange:f})})]}),Object(a.jsxs)("div",{className:"column",children:[Object(a.jsx)("h2",{className:"subtitle",children:"View Output Here:"}),Object(a.jsx)("div",{className:"border",id:p,style:{width:i+1+"mm"},onMouseUp:function(e){var t=window.getSelection().toString();""!==t&&o(t)},onKeyDown:function(e){if(e.ctrlKey&&65===e.keyCode&&(e.preventDefault(),e.target.id.match(new RegExp(p)))){var t=document.createRange();t.selectNode(e.target),window.getSelection().removeAllRanges(),window.getSelection().addRange(t)}},tabIndex:"0",children:Array.from(t.getCurrentContent().getBlockMap(),(function(e){var t=Object(s.a)(e,2),n=t[0],r=t[1].getText();return h&&(r=h(r)),Object(a.jsx)(g,{text:r,widthPx:3.7795275590551185*i,height:v.get(n),enableOptim:d},n)}))})]})]})}var O=function(e){var t=e.getSelection(),n=t.getAnchorKey(),a=e.getCurrentContent().getBlockForKey(n),r=t.getStartOffset(),i=t.getEndOffset(),o=a.getText().slice(r,i);return{selectionState:t,anchorKey:n,contentBlock:a,start:r,end:i,selectedText:o}},x=n(91),y=n(92),w=n(94),S=n(93),C=n(124),N=n(125),k=n(434),E=n(451);k.GlobalWorkerOptions.workerSrc=E;var T=function(e){Object(w.a)(n,e);var t=Object(S.a)(n);function n(e){var a;return Object(x.a)(this,n),(a=t.call(this,e)).importFile=function(e){if(a.fileInputRef.current.value){var t=function(e){console.log(e)};"PDF"===a.state.type?t=a.getDataFromPDF:"JSON"===a.state.type&&(t=a.getDataFromJSON),t(a.fileInputRef.current.files[0]),a.fileInputRef.current.value=""}else console.log("no file picked")},a.inputClick=function(e){return function(){a.setState({type:e}),a.fileInputRef.current.click()}},a.getDataFromPDF=function(e){var t=function(e){var t=e.arrayBuffer().then((function(e){var t=new Uint8Array(e);return k.getDocument({data:t}).promise})),n=t.then((function(e){return e.getXFA()})),a=t.then((function(e){return e.getMetadata().then((function(e){return e.info.Custom["Short Title - Prefix"]+""+e.info.Custom["Short Title - Number"]}))})),r=Promise.all([a,n]),i=r.then((function(e){var t=e[0],n=e[1].datasets;n=n.replace(/&#xD;/g,"\n");var a,r=(new DOMParser).parseFromString(n,"text/xml"),i="",o=Object(c.a)(p.all[t].fields);try{for(o.s();!(a=o.n()).done;){var s=a.value;i+=r.querySelector(s).innerHTML+"\n"}}catch(l){o.e(l)}finally{o.f()}return i})),o=r.then((function(e){var t,n=e[0],a=e[1].template,r=(new DOMParser).parseFromString(a,"text/xml"),i=[],o=[],s=[],l=0,u=Object(c.a)(p.all[n].fields);try{for(u.s();!(t=u.n()).done;){var h=t.value,d=r.querySelector("field[name='"+h+"'");i[l]=d.querySelector("font").getAttribute("typeface"),o[l]=d.querySelector("font").getAttribute("size"),s[l]=d.getAttribute("w"),l+=1}}catch(O){u.e(O)}finally{u.f()}for(var b=0,f=i;b<f.length;b++){if(f[b]!==i[0]){console.log("warning: not all grabbed sections have the same font type");break}}for(var j=0,m=o;j<m.length;j++){if(m[j]!==o[0]){console.log("warning: not all grabbed sections have the same font size");break}}for(var g=0,v=s;g<v.length;g++){if(v[g]!==s[0]){console.log("warning: not all grabbed sections have the same width");break}}return{font:i[0],fontSize:o[0],width:s[0]}}));return{pullBullets:i,getPageInfo:o}}(e),n=t.pullBullets,r=t.getPageInfo,i=a.props.onTextUpdate,o=a.props.onWidthUpdate;Promise.all([n,r]).then((function(e){var t=Object(s.a)(e,2),n=t[0],a=t[1];o(parseFloat(a.width))();var r=(new DOMParser).parseFromString(n,"text/html").documentElement.textContent;i(r)()}))},a.getDataFromJSON=function(e){var t=new FileReader;t.onload=function(e){var t=JSON.parse(e.target.result);a.props.onJSONImport(t)},t.readAsText(e)},a.hoverOut=function(){a.setState({hovering:!1})},a.toggleMenu=function(){var e=a.state.hovering;a.setState({hovering:!e})},a.fileInputRef=Object(r.createRef)(),a.state={type:"none",hovering:!1},a}return Object(y.a)(n,[{key:"render",value:function(){var e=this.state.hovering?"is-active":"";return Object(a.jsxs)("div",{className:"dropdown "+e,children:[Object(a.jsx)("input",{type:"file",onChange:this.importFile,style:{display:"none"},ref:this.fileInputRef}),Object(a.jsx)("div",{className:"dropdown-trigger",children:Object(a.jsxs)("div",{className:"buttons has-addons",children:[Object(a.jsx)("button",{className:"button",onClick:this.inputClick("PDF"),children:"Import"}),Object(a.jsx)("button",{className:"button",onClick:this.toggleMenu,"aria-haspopup":"true","aria-controls":"import-menu",children:Object(a.jsx)("span",{className:"icon",children:Object(a.jsx)(C.a,{icon:N.a})})})]})}),Object(a.jsx)("div",{className:"dropdown-menu",id:"import-menu",role:"menu",onMouseLeave:this.hoverOut,children:Object(a.jsxs)("div",{className:"dropdown-content",children:[Object(a.jsx)("a",{href:"?#",className:"dropdown-item",onClick:this.inputClick("PDF"),children:"PDF"}),Object(a.jsx)("a",{href:"?#",className:"dropdown-item",onClick:this.inputClick("JSON"),children:"JSON"})]})})]})}}]),n}(r.PureComponent),D=function(e){Object(w.a)(n,e);var t=Object(S.a)(n);function n(e){var a;return Object(x.a)(this,n),(a=t.call(this,e)).state={},a}return Object(y.a)(n,[{key:"render",value:function(){var e=this,t=202.321,n=202.321,r=201.041;return Object(a.jsxs)("div",{className:"field is-grouped",children:[Object(a.jsxs)("div",{className:"control field has-addons",children:[Object(a.jsxs)("div",{className:"control has-icons-right",children:[Object(a.jsx)("input",{className:"input",id:"widthInput",type:"number",min:"100",max:"500",step:".001",value:this.props.width,onChange:this.props.onWidthChange}),Object(a.jsx)("span",{className:"icon is-right",children:"mm"})]}),Object(a.jsxs)("div",{className:"control buttons has-addons",children:[Object(a.jsx)("a",{className:"button is-primary "+(this.props.width===t?"":"is-outlined"),onClick:this.props.onWidthUpdate(t),children:"AWD"}),Object(a.jsx)("a",{className:"button is-success "+(this.props.width===n?"":"is-outlined"),onClick:this.props.onWidthUpdate(n),children:"EPR"}),Object(a.jsx)("a",{className:"button is-link "+(this.props.width===r?"":"is-outlined"),onClick:this.props.onWidthUpdate(r),children:"OPR"})]})]}),Object(a.jsx)("a",{className:"control button is-dark"+(this.props.enableOptim?"":"is-outlined"),onClick:this.props.onOptimChange,id:"enableOptim",children:"Auto-Space"}),Object(a.jsx)("a",{className:"control button is-dark"+(this.props.enableHighlight?"":"is-outlined"),onClick:function(){e.props.onHighlightChange(),e.props.handleEnableHighlight()},id:"enableHighlight",children:"Highlight Duplicates"})]})}}]),n}(r.PureComponent),R=function(e){Object(w.a)(n,e);var t=Object(S.a)(n);function n(){return Object(x.a)(this,n),t.apply(this,arguments)}return Object(y.a)(n,[{key:"render",value:function(){return Object(a.jsx)("button",{className:"button",onClick:this.props.onTextNorm,children:"Renormalize Input Spacing"})}}]),n}(r.PureComponent),A=function(e){Object(w.a)(n,e);var t=Object(S.a)(n);function n(e){var a;return Object(x.a)(this,n),(a=t.call(this,e)).onSave=function(){var e=a.props.onSave(),t=JSON.stringify([e]);try{localStorage.setItem("bullet-settings",t),console.log("saved settings/data to local storage with character length "+t.length)}catch(n){if("SecurityError"!==n.name)throw n;alert("Sorry, saving to cookies does not work using the file:// interface and/or your browser's privacy settings")}},a.onExport=function(){var e=a.props.onSave(),t=JSON.stringify([e]),n="data:application/JSON;charset=utf-8,"+encodeURIComponent(t);a.exportRef.current.href=n,a.exportRef.current.click(),console.log("exported settings/data to JSON file with character length "+t.length)},a.hoverOut=function(){a.setState({hovering:!1})},a.toggleMenu=function(){var e=a.state.hovering;a.setState({hovering:!e})},a.exportRef=Object(r.createRef)(),a.state={hovering:!1},a}return Object(y.a)(n,[{key:"render",value:function(){var e=this.state.hovering?"is-active":"";return Object(a.jsxs)("div",{className:"dropdown "+e,children:[Object(a.jsx)("div",{className:"dropdown-trigger",children:Object(a.jsxs)("div",{className:"buttons has-addons",children:[Object(a.jsxs)("button",{className:"button",onClick:this.onSave,children:["Save"," "]}),Object(a.jsx)("button",{className:"button","aria-haspopup":"true","aria-controls":"save-menu",children:Object(a.jsx)("span",{className:"icon",onClick:this.toggleMenu,children:Object(a.jsx)(C.a,{icon:N.a})})})]})}),Object(a.jsx)("div",{className:"dropdown-menu",id:"save-menu",role:"menu",onMouseLeave:this.hoverOut,children:Object(a.jsxs)("div",{className:"dropdown-content",children:[Object(a.jsx)("a",{href:"?#",className:"dropdown-item",onClick:this.onSave,children:"Cookie"}),Object(a.jsx)("a",{href:"?#",className:"dropdown-item",onClick:this.onExport,children:"JSON"})]})}),Object(a.jsx)("a",{href:"?#",style:{display:"none"},download:"settings.json",ref:this.exportRef})]})}}]),n}(r.PureComponent),W=function(e){Object(w.a)(n,e);var t=Object(S.a)(n);function n(){return Object(x.a)(this,n),t.apply(this,arguments)}return Object(y.a)(n,[{key:"render",value:function(){return Object(a.jsxs)("h1",{className:"title",children:[Object(a.jsx)("span",{className:"logo",children:"AF "}),Object(a.jsx)("span",{className:"logo",children:"Bull"}),"et",Object(a.jsx)("span",{className:"logo",children:" Sh"}),"aping &",Object(a.jsx)("span",{className:"logo",children:" i"}),"teration",Object(a.jsx)("span",{className:"logo",children:" t"}),"ool"]})}}]),n}(r.PureComponent),I=function(e){Object(w.a)(n,e);var t=Object(S.a)(n);function n(){return Object(x.a)(this,n),t.apply(this,arguments)}return Object(y.a)(n,[{key:"render",value:function(){return Object(a.jsxs)("a",{className:"button",onClick:this.props.onHide,"aria-haspopup":"true","aria-controls":"thesaurus-menu",children:[Object(a.jsx)("span",{children:"Thesaurus"}),Object(a.jsx)("span",{className:"icon",children:Object(a.jsx)(C.a,{icon:N.a})})]})}}]),n}(r.PureComponent),H=function(e){Object(w.a)(n,e);var t=Object(S.a)(n);function n(){return Object(x.a)(this,n),t.apply(this,arguments)}return Object(y.a)(n,[{key:"render",value:function(){return Object(a.jsx)("nav",{className:"navbar",role:"navigation","aria-label":"main navigation",children:Object(a.jsxs)("div",{className:"navbar-start",children:[Object(a.jsx)("div",{className:"navbar-item",children:Object(a.jsx)(A,{onSave:this.props.onSave})}),Object(a.jsx)("div",{className:"navbar-item",children:Object(a.jsx)(T,{onJSONImport:this.props.onJSONImport,onTextUpdate:this.props.onTextUpdate,onWidthUpdate:this.props.onWidthUpdate})}),Object(a.jsx)("div",{className:"navbar-item",children:Object(a.jsx)(D,{enableOptim:this.props.enableOptim,onOptimChange:this.props.onOptimChange,enableHighlight:this.props.enableHighlight,onHighlightChange:this.props.onHighlightChange,handleEnableHighlight:this.props.handleEnableHighlight,width:this.props.width,onWidthChange:this.props.onWidthChange,onWidthUpdate:this.props.onWidthUpdate})}),Object(a.jsx)("div",{className:"navbar-item",children:Object(a.jsx)(R,{onTextNorm:this.props.onTextNorm})}),Object(a.jsx)("div",{className:"navbar-item",children:Object(a.jsx)(I,{onHide:this.props.onThesaurusHide})})]})})}}]),n}(r.PureComponent);var P=n(332),F=n(127),M=n.n(F),L=n.p+"static/media/abbrs.ebd0e99b.xlsx",J=n(230),U=n(331),B=(n(324),{columns:[{data:"enabled",type:"checkbox",disableVisualSelection:!0,width:20},{data:"value",type:"text"},{data:"abbr",type:"text"}],stretchH:"all",width:500,autoWrapRow:!0,height:500,maxRows:1/0,manualRowResize:!0,manualColumnResize:!0,rowHeaders:!0,colHeaders:["Enabled","Word","Abbreviation"],trimWhitespace:!1,enterBeginsEditing:!1,manualRowMove:!0,manualColumnMove:!0,columnSorting:{indicator:!0},autoColumnSize:!1,minRows:15,contextMenu:!0,licenseKey:"non-commercial-and-evaluation"});var z=function(e){var t=e.data,n=e.setData,i=Object(r.useRef)(null);return Object(a.jsx)(U.a,Object(J.a)(Object(J.a)({},B),{},{data:t,ref:i,afterChange:function(e,t){if("loadData"!==t&&null!==i.current){var a=i.current.hotInstance.getData().map((function(e){return{enabled:e[0],value:e[1],abbr:e[2]}}));n(a)}}}))},K=function(e,t){var n=new FileReader;n.onload=function(e){var n=e.target.result,a=M.a.read(n,{type:"binary",raw:!0}),r=M.a.utils.sheet_to_json(a.Sheets[a.SheetNames[0]],{header:["enabled","value","abbr"]}).map((function(e){return{enabled:e.enabled,value:e.value,abbr:e.abbr}}));r[0].enabled.toString().match(/enabled/i)?t(r.slice(1)):t(r)},n.readAsBinaryString(e)};function V(e){var t=e.data,n=e.setData,i=(Object(P.a)(e,["data","setData"]),Object(r.createRef)());return Object(a.jsxs)("div",{className:"toolbox",children:[Object(a.jsx)("input",{type:"file",onChange:function(e){i.current.value?(K(i.current.files[0],n),i.current.value=""):console.log("no file picked")},ref:i,style:{display:"none"}}),Object(a.jsx)("button",{className:"button",onClick:function(){return i.current.click()},children:"Import Abbrs"}),Object(a.jsx)("button",{className:"button",onClick:function(){return function(e){var t=M.a.utils.book_new(),n=M.a.utils.json_to_sheet(e);M.a.utils.book_append_sheet(t,n,"abbrs"),M.a.writeFile(t,"abbrs.xlsx")}(t)},children:"Export Abbrs"}),Object(a.jsx)("button",{className:"button",onClick:function(){var e;window.confirm("Are you sure you want to remove all existing acronyms and replace with a common list?")&&(e=function(e){return K(e,n)},new Promise((function(e){var t=new XMLHttpRequest;t.responseType="blob",t.onload=function(){e(t.response)},t.open("GET",L,!0),t.send()})).then(e))},children:"Load Common Abbrs"})]})}var q=function(e){var t=e.data,n=e.setData;return Object(a.jsxs)("div",{children:[Object(a.jsx)(V,{setData:n,data:t}),Object(a.jsx)(z,{data:t,setData:n})]})},X=function(e,t){return function(n){n.preventDefault(),t.props.onSelReplace(e)}},_=function(e){Object(w.a)(n,e);var t=Object(S.a)(n);function n(e){var a;return Object(x.a)(this,n),(a=t.call(this,e)).getSynonyms=function(e){var t=new XMLHttpRequest;t.onreadystatechange=function(){if(4===t.readyState&&200===t.status){var e=JSON.parse(t.responseText);0!==e.length?a.setState({synonyms:e.map((function(e){return e.word}))}):a.setState({synonyms:[]})}};t.open("GET","https://api.datamuse.com/words?max=75&ml="+e,!0),t.send()},a.state={synonyms:[],hidden:!0},a}return Object(y.a)(n,[{key:"componentDidMount",value:function(){this.getSynonyms(this.props.word)}},{key:"componentDidUpdate",value:function(e){e.word!==this.props.word&&this.getSynonyms(this.props.word)}},{key:"render",value:function(){var e,t=this.props.abbrReplacer(this.props.word),n=this.props.abbrDict[this.props.word],r=Object(a.jsxs)("span",{className:"tag is-medium",children:[Object(a.jsx)($,{word:this.props.word,abbr:t===this.props.word?"":t,otherAbbrs:n},this.props.word),Object(a.jsx)("a",{className:"icon is-small",onMouseDown:X(this.props.word,this),children:Object(a.jsx)(C.a,{icon:N.b,size:"xs",color:"#51cf66"})})]}),i=Object(a.jsx)(G,{onSelReplace:this.props.onSelReplace,synonyms:this.state.synonyms,abbrDict:this.props.abbrDict,abbrReplacer:this.props.abbrReplacer},this.state.synonyms.join("")),o=Object(a.jsx)("span",{className:"panel-block",children:"Auto-thesaurus box - highlight a word or phrase below to show synonyms in this box"},"init"),s=Object(a.jsx)("span",{className:"panel-block",children:"no results found"},"none");return e=""===this.props.word?o:0===this.state.synonyms.length?s:i,Object(a.jsxs)("div",{className:"card",children:[Object(a.jsxs)("header",{className:"card-header has-background-light\tis-shadowless",children:[Object(a.jsxs)("div",{className:"card-header-title",children:[Object(a.jsxs)("span",{children:["Thesaurus",this.props.word?":":""]}),this.props.word?r:""]}),Object(a.jsx)("a",{className:"card-header-icon",onClick:this.props.onHide,children:Object(a.jsx)("span",{className:"delete"})})]}),Object(a.jsx)("div",{className:"card-content",style:{height:"290px",overflow:"auto"},children:e})]})}}]),n}(r.PureComponent),G=function(e){Object(w.a)(n,e);var t=Object(S.a)(n);function n(){var e;Object(x.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).handleCardClick=function(t){return function(n){n.preventDefault(),e.props.onSelReplace(t)}},e}return Object(y.a)(n,[{key:"render",value:function(){var e=this;return Object(a.jsx)("div",{children:Object(a.jsx)("div",{className:"tags are-medium ",children:this.props.synonyms.map((function(t,n){var r=e.props.abbrReplacer(t),i=e.props.abbrDict[t];return Object(a.jsxs)("span",{className:"tag",children:[Object(a.jsx)($,{word:t,abbr:r===t?"":r,otherAbbrs:i}),Object(a.jsx)("a",{className:"icon",onMouseDown:X(t,e),children:Object(a.jsx)(C.a,{icon:N.b,size:"xs",color:"#51cf66"})})]},n)}))})})}}]),n}(r.PureComponent),$=function(e){Object(w.a)(n,e);var t=Object(S.a)(n);function n(){return Object(x.a)(this,n),t.apply(this,arguments)}return Object(y.a)(n,[{key:"render",value:function(){var e=this,t="";this.props.abbr&&(t=Object(a.jsx)("span",{style:{fontWeight:"bold"},children:" ("+this.props.abbr+")"}));var n="",r="";if(this.props.otherAbbrs){if(this.props.otherAbbrs.enabled){var i=this.props.otherAbbrs.enabled.filter((function(t){return t!==e.props.abbr}));i.length>0&&(n=Object(a.jsx)("span",{style:{fontStyle:"italic"},children:" ("+i.join(",")+")"}))}if(this.props.otherAbbrs.disabled){var o=this.props.otherAbbrs.disabled;o.length>0&&(r=Object(a.jsx)("span",{style:{fontStyle:"italic"},children:" ("+o.join(",")+")"}))}}return Object(a.jsxs)("span",{children:[Object(a.jsx)("span",{children:this.props.word}),t,n,r]})}}]),n}(r.PureComponent),Z=_,Q=[{enabled:!0,value:"abbreviations",abbr:"abbrs"},{enabled:!0,value:"table",abbr:"tbl"},{enabled:!0,value:"optimize",abbr:"optim"},{enabled:!0,value:"with ",abbr:"w/"},{enabled:!0,value:"parentheses",abbr:"parens"}],Y=u.EditorState.createWithContent(u.ContentState.createFromText("- This is a custom built bullet writing tool; abbreviations will be replaced according to table in the abbreviations tab--you will see output on the right\n- This tool can optimize spacing; output will be red if the optimizer could not fix spacing with 2004 or 2006 Unicode spaces\n- Click the thesaurus button to show one; select a word in this or the output box to view synonyms--words in parentheses are abbreviations that are configured"));var ee=function(e){var t=e.enableHighlight,n=e.onHighlightChange,i=Object(r.useState)(!0),o=Object(s.a)(i,2),h=o[0],d=o[1],b=Object(r.useState)(202.321),f=Object(s.a)(b,2),p=f[0],m=f[1],g=Object(r.useState)(Q),x=Object(s.a)(g,2),y=x[0],w=x[1],S=Object(r.useState)({}),C=Object(s.a)(S,2),N=C[0],k=C[1],E=Object(r.useState)(""),T=Object(s.a)(E,2),D=T[0],R=T[1],A=Object(r.useState)(0),I=Object(s.a)(A,2),P=I[0],F=I[1],M=Object(r.useState)(!1),L=Object(s.a)(M,2),J=L[0],U=L[1],B=Object(r.useState)(Y),z=Object(s.a)(B,2),K=z[0],V=z[1];function X(e){var t,n,a,r=e[0];(d(null!==(t=r.enableOptim)&&void 0!==t?t:h),m(parseFloat(null!==(n=r.width)&&void 0!==n?n:p)),Array.isArray(r.abbrData[0]))?w(r.abbrData.map((function(e){return{enabled:e[0],value:e[1],abbr:e[2]}}))):w(null!==(a=r.abbrData)&&void 0!==a?a:y);V(r.editorState?u.EditorState.fromJS(r.editorState):u.EditorState.createWithContent(u.ContentState.createFromText(r.text)))}Object(r.useEffect)((function(){try{localStorage.getItem("bullet-settings")&&X(JSON.parse(localStorage.getItem("bullet-settings")))}catch(e){if("SecurityError"!==e.name)throw e;console.log("Was not able to get localstorage bullets due to use of file interface and browser privacy settings")}}),[]),Object(r.useEffect)((function(){var e={};y.filter((function(e){return null!==e.value&&null!==e.abbr})).forEach((function(t){var n=String(t.value).replace(/\s/g," "),a=t.abbr,r=t.enabled;e[n]=e[n]||[],r?(e[n].enabled=e[n].enabled||[],e[n].enabled.push(a)):(e[n].disabled=e[n].disabled||[],e[n].disabled.push(a))})),k(e)}),[y]);var _=Object(r.useCallback)((function(e){var t={};Object.keys(N).forEach((function(e){var n=N[e];n.enabled&&(t[e]=n.enabled[n.enabled.length-1])}));var n=Object.keys(t).map((function(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")})).join("|"),a=new RegExp("(^|\\W|\\b)("+n+")(\\W|\\b|$)","g");return e.replace(a,(function(e,n,a,r){var i=t[a];return i||(i=""),n+i+r}))}),[N]);function G(){var e=K.getCurrentContent();if(!1===t){var n=function(e){var t,n=document.getElementsByClassName("yellow-highlight"),a=Object(c.a)(n);try{for(a.s();!(t=a.n()).done;){var r=t.value;e.target.innerText==r.outerText&&("yellow"==r.style.background?r.style.background="LawnGreen":r.style.background="yellow")}}catch(i){a.e(i)}finally{a.f()}},r=function(e,t){!function(e,t,n){var a=t.getText();e.forEach((function(e){Object(l.a)(a.matchAll(e)).forEach((function(e){return n(e.index,e.index+e[0].length)}))}))}(i,e,t)},i=function(e){return e.filter((function(t,n){return e.indexOf(t)!==n&&t.length>1}))}(e.getPlainText().split(/\s|;|--|\//));i=Object(l.a)(new Set(i));var o=function(e){var t=e.children;return Object(a.jsx)("span",{className:"yellow-highlight",onClick:n,style:{background:"yellow",cursor:"pointer"},children:t})};V(u.EditorState.set(K,{decorator:new u.CompositeDecorator([{strategy:r,component:o}])}))}else V(u.EditorState.set(K,{decorator:null}))}function $(){U(!J)}var ee=[Object(a.jsx)(v,{editorState:K,setEditorState:V,abbrReplacer:_,width:p,onSelect:function(e){""!==e.trim()&&R(j(e.trim()).slice(0,8).join(" "))},enableOptim:h,enableHighlight:t,onHighlightChange:n,handleEnableHighlight:G}),Object(a.jsx)(q,{data:y,setData:w})];return Object(a.jsx)("div",{className:"container is-fluid",children:Object(a.jsxs)("div",{className:"columns is-multiline",children:[Object(a.jsxs)("div",{className:"column is-full",children:[Object(a.jsx)(W,{}),Object(a.jsx)(H,{enableOptim:h,enableHighlight:t,onOptimChange:function(){d(!h)},onHighlightChange:n,handleEnableHighlight:G,width:p,onWidthChange:function(e){m(parseFloat(e.target.value))},onWidthUpdate:function(e){return function(){return m(e)}},onTextNorm:function(){var e=[],t=K.getCurrentContent();t.getBlockMap().forEach((function(t,n){!function(e,t,n){for(var a,r,i=t.getText();null!==(a=e.exec(i));)n(r=a.index,r+a[0].length)}(/\s+/g,t,(function(t,a){var r=u.SelectionState.createEmpty(n).merge({anchorOffset:t,focusOffset:a});e.push(r)}))}));var n=t;e.reverse().forEach((function(e){n=u.Modifier.replaceText(n,e," ")})),V(u.EditorState.createWithContent(n))},onTextUpdate:function(e){return function(){return V(u.EditorState.createWithContent(u.ContentState.createFromText(e)))}},onSave:function(){return{width:p,text:K.getCurrentContent().getPlainText("\n"),editorState:K.toJS(),abbrData:y,enableOptim:h}},onJSONImport:X,onThesaurusHide:$})]}),Object(a.jsx)("div",{className:"column is-full "+(J?"":"is-hidden"),children:Object(a.jsx)(Z,{word:D,onSelReplace:function(e){if(document.activeElement.className.match(/public-DraftEditor-content/)){var n=O(K),r=n.selectedText,i=n.start,o=n.anchorKey,s=n.selectionState,h=r.match(/\s*$/)[0],d=i+e.length+h.length,b=u.SelectionState.createEmpty(o).merge({anchorOffset:i,focusOffset:d}),f=u.Modifier.replaceText(K.getCurrentContent(),s,e+h),p=u.EditorState.push(K,f,"insert-characters"),j=u.EditorState.forceSelection(p,b);V(j);var m=j.getCurrentContent();if(!0===t){var g=function(e){var t,n=document.getElementsByClassName("yellow-highlight"),a=Object(c.a)(n);try{for(a.s();!(t=a.n()).done;){var r=t.value;e.target.innerText==r.outerText&&("yellow"==r.style.background?r.style.background="LawnGreen":r.style.background="yellow")}}catch(i){a.e(i)}finally{a.f()}},v=function(e,t){!function(e,t,n){var a=t.getText();e.forEach((function(e){Object(l.a)(a.matchAll(e)).forEach((function(e){return n(e.index,e.index+e[0].length)}))}))}(x,e,t)},x=function(e){return e.filter((function(t,n){return e.indexOf(t)!==n&&t.length>1}))}(m.getPlainText().split(/\s|;|--|\//));x=Object(l.a)(new Set(x));var y=function(e){var t=e.children;return Object(a.jsx)("span",{className:"yellow-highlight",onClick:g,style:{background:"yellow",cursor:"pointer"},children:t})};V(u.EditorState.set(j,{decorator:new u.CompositeDecorator([{strategy:v,component:y}])}))}else V(u.EditorState.set(j,{decorator:null}))}},abbrDict:N,abbrReplacer:_,onHide:$})}),Object(a.jsx)("div",{className:"column is-full",children:Object(a.jsx)("div",{className:"tabs",children:Object(a.jsx)("ul",{children:["Bullets","Abbreviations"].map((function(e,t){return Object(a.jsx)("li",{className:P===t?"is-active":"",children:Object(a.jsx)("a",{onClick:(n=t,function(){return F(n)}),children:e})},t);var n}))})})}),Object(a.jsx)("div",{className:"column is-full",children:ee[P]})]})})};function te(){var e=Object(r.useState)(!1),t=Object(s.a)(e,2),n=t[0],i=t[1];return Object(a.jsx)(ee,{enableHighlight:n,onHighlightChange:function(){i(!n),console.log("enableHighlight state changed")}})}n(489);var ne=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function ae(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var re=n(330);n.n(re).a.load({custom:{families:["AdobeTimes"]}}),o.a.render(Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("div",{className:"section",id:"stuff",children:Object(a.jsx)(te,{})}),Object(a.jsxs)("div",{className:"container",id:"footer",children:[Object(a.jsxs)("div",{children:["If you have feedback, submit an ",Object(a.jsx)("a",{href:"https://github.com/AF-VCD/pdf-bullets/issues",children:"issue"}),"or a ",Object(a.jsx)("a",{href:"https://github.com/AF-VCD/pdf-bullets/pulls",children:"pull request"})]}),Object(a.jsx)("div",{children:"This site utilizes PDF.JS (pdf import), react-table (spreadsheet), draft-js (editor), the DataMuse API (thesaurus), and Bulma (CSS)."}),Object(a.jsxs)("div",{children:["This site has basic analytics to track the total number of visits to the page. See ",Object(a.jsx)("a",{href:"https://github.com/ckhordiasma/log-bullet-visitors",children:"here"})," for details"]}),Object(a.jsx)("div",{children:"Maintained by Christopher Kodama "})]})]}),document.getElementById("root")),function(){var e=new XMLHttpRequest;e.onreadystatechange=function(){if(e.readyState===XMLHttpRequest.DONE){var t=e.status;if(t>=200&&t<400){var n=JSON.parse(e.response).Count;console.log("The bullets site(s) have been visited "+n+" times in the last 7 days.")}else console.log("Visitor count increment: task failed successfully")}},e.open("POST","https://g5z50elklh.execute-api.us-east-2.amazonaws.com/default/LogVisitors",!0),e.send()}(),function(e){if("serviceWorker"in navigator){if(new URL("/afbs",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/afbs","/service-worker.js");ne?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):ae(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):ae(t,e)}))}}()}},[[490,1,2]]]);
//# sourceMappingURL=main.a6c77604.chunk.js.map